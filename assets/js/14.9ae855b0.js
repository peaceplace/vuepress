(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{390:function(t,a,e){"use strict";e.r(a);var s=e(0),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("技术简介")]),t._v(" "),e("p",[t._v("NFS（网络文件系统）服务可以将远程Linux系统上的文件共享资源挂载到本地主机的目录上，从而使得本地主机（Linux客户端）基于TCP/IP协议，像使用本地主机上的资源那样读写远程Linux系统上的共享文件\n")]),t._v(" "),e("h2",{attrs:{id:"实施方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实施方法"}},[t._v("#")]),t._v(" 实施方法")]),t._v(" "),e("blockquote",[e("p",[t._v("假设企业需求:")]),t._v(" "),e("blockquote",[e("p",[t._v("• 共享/data/share目录；\n• 用于存储server01主机的web数据；\n• 仅允许service网段访问该共享。")])])]),t._v(" "),e("h2",{attrs:{id:"配置方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置方法"}},[t._v("#")]),t._v(" 配置方法")]),t._v(" "),e("p",[t._v("环境： server01 （debian 10.x） IP： 172.16.100.201\n共享目录： /data/share\nservice网段： 172.16.100.128/25")]),t._v(" "),e("h3",{attrs:{id:"创建文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建文件"}},[t._v("#")]),t._v(" 创建文件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mkdir /data/share\n")])])]),e("h3",{attrs:{id:"安装nfs工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装nfs工具"}},[t._v("#")]),t._v(" 安装nfs工具")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("apt install -y nfs*\n")])])]),e("h3",{attrs:{id:"修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[t._v("#")]),t._v(" 修改配置文件")]),t._v(" "),e("p",[t._v("配置文件位置： /etc/exports")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('echo "/data/share   172.16.100.128/25(rw,sync,root_squash)" >> /etc/exports\n')])])]),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/6eef87ef06deba7fdce4f9a38aa12949.png",alt:""}})]),t._v(" "),e("center",[e("strong",[t._v("用于配置NFS服务程序配置文件的参数")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("ro")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("只读")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("rw")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("读写")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("root_squash")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("当NFS客户端以root管理员访问时，映射为NFS服务器的匿名用户")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("no_root_squash")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("当NFS客户端以root管理员访问时，映射为NFS服务器的root管理员")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("all_squash")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无论NFS客户端使用什么账户访问，均映射为NFS服务器的匿名用户")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("sync")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("同时将数据写入到内存与硬盘中，保证不丢失数据")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("async")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("优先将数据保存到内存，然后再写入硬盘；这样效率更高，但可能会丢失数据")])])])]),t._v(" "),e("h3",{attrs:{id:"重启服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重启服务"}},[t._v("#")]),t._v(" 重启服务")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("systemctl restart nfs-server\n")])])]),e("h3",{attrs:{id:"在service网段内的服务器进行测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在service网段内的服务器进行测试"}},[t._v("#")]),t._v(" 在service网段内的服务器进行测试")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("showmount -e 172.16.100.201\n")])])]),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/f4943c605ac5f096d9efd294d51cfcc7.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"挂载共享文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#挂载共享文件"}},[t._v("#")]),t._v(" 挂载共享文件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mkdir /data/web\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('echo "172.168.100.201:/data/share /data/web nfs defaults 0 0" >> /etc/fstab\n')])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mount -a\n")])])])],1)}),[],!1,null,null,null);a.default=r.exports}}]);