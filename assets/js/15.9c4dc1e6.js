(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{387:function(t,a,e){"use strict";e.r(a);var r=e(0),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("技术简介")]),t._v(" "),e("p",[t._v("RAID5技术是把硬盘设备的数据奇偶校验信息保存到其他硬盘设备中。RAID 5磁盘阵列组中数据的奇偶校验信息并不是单独保存到某一块硬盘设备中，而是存储到除自身以外的其他每一块硬盘设备上，这样的好处是其中任何一设备损坏后不至于出现致命缺陷；换句话说，就是RAID 5技术实际上没有备份硬盘中的真实数据信息，而是当硬盘设备出现问题后通过奇偶校验信息来尝试重建损坏的数据。RAID这样的技术特性“妥协”地兼顾了硬盘设备的读写速度、数据安全性与存储成本问题\n")]),t._v(" "),e("h2",{attrs:{id:"实施方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实施方法"}},[t._v("#")]),t._v(" 实施方法")]),t._v(" "),e("blockquote",[e("p",[t._v("假设企业需求:")]),t._v(" "),e("blockquote",[e("p",[t._v("•\t在虚拟机上添加 4 个 1G 的硬盘；"),e("br"),t._v("\n• 创建 raid5，其中一个作为热备盘, 设备名为md0;"),e("br"),t._v("\n• 将 md0 设置为 LVM，设备为/dev/vg01/lv01；"),e("br"),t._v("\n• 格式化为 ext4 文件系统;"),e("br"),t._v("\n• 开机自动挂载到/data 目录")])])]),t._v(" "),e("h3",{attrs:{id:"环境创建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境创建"}},[t._v("#")]),t._v(" 环境创建")]),t._v(" "),e("h4",{attrs:{id:"虚拟机上添加四块1g硬盘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机上添加四块1g硬盘"}},[t._v("#")]),t._v(" 虚拟机上添加四块1G硬盘")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/1fdd2f312ca7425da2902964d2bb156c.png",alt:""}})]),t._v(" "),e("h4",{attrs:{id:"在系统上查看硬盘是否存在以及对应硬盘名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在系统上查看硬盘是否存在以及对应硬盘名"}},[t._v("#")]),t._v(" 在系统上查看硬盘是否存在以及对应硬盘名")]),t._v(" "),e("div",{staticClass:"language-Linux extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("root@Server01:~# lsblk\n")])])]),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/54431d1e0a9f637641a7b9b8be81b1d4.png",alt:""}})]),t._v(" "),e("h4",{attrs:{id:"安装mdadm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装mdadm"}},[t._v("#")]),t._v(" 安装mdadm")]),t._v(" "),e("div",{staticClass:"language-Linux extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("root@Server01:~# apt install -y mdadm\n")])])]),e("h4",{attrs:{id:"使用mdadm命令创建raid5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用mdadm命令创建raid5"}},[t._v("#")]),t._v(" 使用mdadm命令创建raid5")]),t._v(" "),e("div",{staticClass:"language-Linux extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("root@Server01:~# mdadm -Cv /dev/md0 -n 3 -l 5 -x 1 /dev/sd[b-e]\n")])])]),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/780aaf0146bd51a0150997781e33159b.png",alt:""}})]),t._v(" "),e("center",[e("strong",[t._v("mdadm命令的常用参数和作用")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-a")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("检测设备名称")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-n")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("指定设备数量")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-l")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("指定RAID级别")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-C")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("创建")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-v")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("显示过程")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-f")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("模拟设备损坏")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-r")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("移除设备")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-Q")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("查看摘要信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-D")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("查看详细信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("-S")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("停止RAID磁盘阵列")])])])]),t._v(" "),e("blockquote",[e("p",[t._v("根据常用参数解释命令则为：创建/dev/md0阵列卡并显示过程，其中等级为5，硬盘数为3，热备盘数为1，硬盘设备为：/dev/sdb,sdc,sdd,sde")])]),t._v(" "),e("h4",{attrs:{id:"将md0设置为lvm-逻辑卷管理器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将md0设置为lvm-逻辑卷管理器"}},[t._v("#")]),t._v(" 将md0设置为lvm（逻辑卷管理器）")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("首先安装lvm工具： "),e("code",[t._v("apt install -y lvm*")])])]),t._v(" "),e("li",[e("p",[t._v("添加硬盘使其支持LVM技术："),e("code",[t._v("pvcreate /dev/md0")])])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/84f1aff1958013599aa6dababe3a741e.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("将硬盘设备添加进vg01卷组："),e("code",[t._v("vgcreate vg01 /dev/md0")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/c018d630ea8db8552b973c0167712a67.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("切割逻辑卷设备，没要求大小则此处设置为1G： "),e("code",[t._v("lvcreate -n lv01 -L 1G vg01")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/01537136ee0ea0339a14e140c625bb16.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("查看是否成功创建： "),e("code",[t._v("lvdisplay")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/97f60a8d29c182e011ec3584b0350932.png",alt:""}})]),t._v(" "),e("h4",{attrs:{id:"格式化磁盘为ext4格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#格式化磁盘为ext4格式"}},[t._v("#")]),t._v(" 格式化磁盘为ext4格式")]),t._v(" "),e("div",{staticClass:"language-Linux extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("root@Server01:~# mkfs.ext4 /dev/vg01/lv01\n")])])]),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/3559a94d6714328f3efebb1d644ef7d5.png",alt:""}})]),t._v(" "),e("h4",{attrs:{id:"挂载磁盘分区到-data目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#挂载磁盘分区到-data目录"}},[t._v("#")]),t._v(" 挂载磁盘分区到/data目录")]),t._v(" "),e("div",{staticClass:"language-Linux extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("root@Server01:~# mkdir /data\nroot@Server01:~#  echo “/dev/vg01/lv01 /data ext4 defaults 0 0” >> /etc/fstab\nroot@Server01:~# mount -a\n")])])]),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/c15c43574ae2bcec44208d529a18c7e3.png",alt:""}})]),t._v(" "),e("h4",{attrs:{id:"查看是否挂载成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看是否挂载成功"}},[t._v("#")]),t._v(" 查看是否挂载成功")]),t._v(" "),e("div",{staticClass:"language-Linux extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("root@Server01:~# df -Th\n")])])]),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/fa80e6e80cfdd9840c97209b97d3b904.png",alt:""}})])],1)}),[],!1,null,null,null);a.default=s.exports}}]);